<style>
    td>img {
        width: 100%;
        height: 250px;
        object-fit: contain;
    }
</style>

<body>
    <table id="comparison">
    </table>

    <script>
        window.onload = function() {
        var productsToCompare = JSON.parse(localStorage.getItem('productsToCompare'));
  
        // Get the table where you want to display the products
        var comparisonTable = document.getElementById('comparison');
  
        // Create a table row for each attribute
        var attributes = ['name', 'image', 'price', 'specifications', 'brand'];
        for (var i = 0; i < attributes.length; i++) {
            var attributeRow = document.createElement('tr');
                
            var attributeCell = document.createElement('th');
            attributeCell.textContent = attributes[i];
            attributeRow.appendChild(attributeCell);

            for (var j = 0; j < productsToCompare.length; j++) {
                var productCell = document.createElement('td');
                
                // If the attribute is 'image', create an img element and set its src to the image URL
                if (attributes[i] === 'image') {
                    var img = document.createElement('img');
                    img.src = productsToCompare[j][attributes[i]];
                    img.alt = productsToCompare[j]['name'];
                    productCell.appendChild(img);
                } 
                // If the attribute is 'specifications', split the value by comma and add a line break after each item
                else if (attributes[i] === 'specifications') {
                    var specs = productsToCompare[j][attributes[i]].split(', ');
                    productCell.innerHTML = specs.join('<br>');
                } else {
                    productCell.textContent = productsToCompare[j][attributes[i]];
                }
                
                attributeRow.appendChild(productCell);
            }

            comparisonTable.appendChild(attributeRow);
        }
    }
    </script>
</body>